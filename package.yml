name       : python3
version    : 3.7.10
release    : 31
source     :
    - https://www.python.org/ftp/python/3.7.10/Python-3.7.10.tar.xz : f8d82e7572c86ec9d55c8627aae5040124fd2203af400c383c821b980306ee6b
    - https://files.pythonhosted.org/packages/cd/82/04e9aaf603fdbaecb4323b9e723f13c92c245f6ab2902195c53987848c78/pip-21.1.2-py3-none-any.whl : f8ea1baa693b61c8ad1c1d8715e59ab2b93cd3c4769bacab84afcc4279e7a70e
license    : Python-2.0
summary    :
    - Python development environment - 3.7
    - test : Python 3.7 Test package
component  :
    - programming.python
    - test : programming.python
    - tkinter : programming.python
description: |
    The Python 3 package contains the Python development environment. This is useful for object-oriented programming, writing scripts, prototyping large programs or developing entire applications.
optimize   :
    - speed
networking : yes
builddeps  :
    - pkgconfig(harfbuzz) # Fix linking for tkinter
    - pkgconfig(libffi)
    - pkgconfig(openssl)
    - pkgconfig(sqlite3)
    - pkgconfig(tcl)
    - pkgconfig(tk)
    - pkgconfig(x11)
    - bzip2-devel
    - db5-devel
    - gdbm-devel
replaces   :
    - python3-setuptools
rundeps    :
    - test : python3
    - tkinter : python3
patterns   :
    - /usr/include/python3.7m/pyconfig.h
    - test :
        - /usr/lib/python3.7/test
    - tkinter :
        - /usr/lib64/python3.7/lib-dynload/_tkinter.cpython-37m-x86_64-linux-gnu.so
setup      : |
    %apply_patches

    # Upgrade bundled pip
    sed -i 's/_PIP_VERSION = "20.1.1"/_PIP_VERSION = "21.1.2"/' Lib/ensurepip/__init__.py
    sed -i 's/_PIP_VERSION, "py2.py3"/_PIP_VERSION, "py3"/' Lib/ensurepip/__init__.py
    rm Lib/ensurepip/_bundled/pip-20.1.1-py2.py3-none-any.whl
    cp $sources/pip-21.1.2-py3-none-any.whl Lib/ensurepip/_bundled/

    %configure --enable-ipv6=yes \
               --enable-loadable-sqlite-extensions \
               --enable-optimizations \
               --enable-shared \
               --with-ensurepip=install \
               --with-system-expat \
               --with-system-ffi \
               --without-cxx-main \
               CFLAGS="$CFLAGS -I/usr/include"
build      : |
    %make
    # Note that during tests we will have an error on test_ssl. This is resolved in python 3.8 / 3.9.
    # See https://bugs.python.org/issue37322
    # https://github.com/python/cpython/commit/4c403b8ca2d0ef44b691cceaeeac9e110fd3f05a
install    : |
    %make_install
    rm $installdir/usr/bin/2to3
